"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(t,s){for(var i=0;i<s.length;i++){var e=s[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}();function _classCallCheck(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}var AccmiSlider=exports.AccmiSlider=function(){function e(){var i=this,s=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];_classCallCheck(this,e),this.userOptions={arrows:!(void 0!==s.arrows)||s.arrows,duration:void 0===s.duration?.8:s.duration,animation:void 0===s.animation?"ease":s.animation,visibileItem:void 0===s.visibileItem?1:s.visibileItem,arrowLeftClass:void 0===s.arrowLeftClass?"prev":s.arrowLeftClass,arrowRightClass:void 0===s.arrowRightClass?"next":s.arrowRightClass,offsetRight:void 0===s.offsetRight?0:s.offsetRight,dots:!(void 0!==s.dots)||s.dots,beforeChange:void 0===s.beforeChange?function(){return null}:function(t){return s.beforeChange(t)},infinity:void 0!==s.infinity&&s.infinity,typeChange:void 0===s.typeChange?"carousel":s.typeChange,arrowLeftContent:void 0===s.arrowLeftContent?"<span>prev</span>":s.arrowLeftContent,arrowRightContent:void 0===s.arrowRightContent?"<span>next</span>":s.arrowRightContent},this.settings={main:t,wrapper:t.querySelector(".accmi-slider-wrapper"),position:0,maxPosition:t.querySelector(".accmi-slider-wrapper").children.length-this.userOptions.visibileItem},this.settings.wrapper.style.transition="transform "+this.userOptions.duration+"s "+this.userOptions.animation,this.widthContainer=this.settings.main.getBoundingClientRect().width,this.touches={start:0,end:0,endDetect:!1,current:0},this.userOptions.arrows&&this.addArrows(),1<this.userOptions.visibileItem&&[].forEach.call(this.settings.wrapper.children,function(t,s){t.style.flex="0 0 "+(100/i.userOptions.visibileItem-5)+"%",s===i.settings.wrapper.children.length-1||(t.style.marginRight=i.userOptions.offsetRight+"%")}),this.userOptions.dots&&this.addDots(),this.proc=1<this.userOptions.visibileItem?this.procInit():100,this.listners(),this.settings.wrapper.classList.add(this.userOptions.typeChange)}return _createClass(e,[{key:"procInit",value:function(){var t=this.settings.wrapper.children[0],s=t.offsetWidth+parseInt(getComputedStyle(t).marginRight);return 100/(this.settings.wrapper.offsetWidth/s)}},{key:"addDots",value:function(){for(var i=this,e=document.createElement("div"),t=this.settings.maxPosition+1,s=function(t){var s=document.createElement("div");e.appendChild(s),s.setAttribute("class","accmi-slider-dots-container-dot"),0===t&&s.classList.add("active"),s.addEventListener("click",function(){i.goToSlide(t)})},n=0;n<t;++n)s(n);e.setAttribute("class","accmi-slider-dots-container"),this.settings.main.appendChild(e),this.settings.dots=e}},{key:"addArrows",value:function(){var t=document.createElement("div"),s=document.createElement("div");this.settings.main.appendChild(t),this.settings.main.appendChild(s),t.setAttribute("class","accmi-slider-arrow-left"),s.setAttribute("class","accmi-slider-arrow-right"),t.innerHTML=this.userOptions.arrowLeftContent,s.innerHTML=this.userOptions.arrowRightContent,t.classList.add(this.userOptions.arrowLeftClass),s.classList.add(this.userOptions.arrowRightClass),this.settings.prev=t,this.settings.next=s}},{key:"listners",value:function(){var i=this;this.userOptions.arrows&&(this.settings.next.addEventListener("click",function(){i.nextSlide()}),this.settings.prev.addEventListener("click",function(){i.prevSlide()})),this.settings.wrapper.addEventListener("mousedown",this.touchStart.bind(this)),this.settings.wrapper.addEventListener("mousemove",this.touchMove.bind(this)),this.settings.wrapper.addEventListener("mouseup",this.touchEnd.bind(this)),[].forEach.call(this.settings.wrapper.children,function(t,s){if("carousel"!==i.userOptions.typeChange){if(t.style.transition="opacity "+i.userOptions.duration+"s "+i.userOptions.animation+", \n            transform "+i.userOptions.duration+"s "+i.userOptions.animation,s===i.settings.position)return void t.classList.add("fade"===i.userOptions.typeChange?"fadeIn":"zoomIn");t.classList.add("fade"===i.userOptions.typeChange?"fadeOut":"zoomOut")}t.addEventListener("touchstart",i.touchStart.bind(i)),t.addEventListener("touchend",i.touchEnd.bind(i)),t.addEventListener("touchmove",i.touchMove.bind(i))})}},{key:"touchStart",value:function(t){this.touches.start=void 0===t.touches?t.clientX:t.touches[0].clientX,this.touches.endDetect=!0,this.settings.wrapper.style.transition="transform 0s "+this.userOptions.animation}},{key:"touchEnd",value:function(t){this.scrollEnabled();var s=void 0===t.changedTouches?t.clientX:t.changedTouches[0].clientX,i=100/(this.widthContainer/(this.touches.start-s));this.settings.wrapper.style.transition="transform "+this.userOptions.duration+"s "+this.userOptions.animation,this.touches.end=s,this.touches.endDetect=!1,20<Math.abs(i)?0<i?this.nextSlide():this.prevSlide():this.settings.wrapper.style.transform="translate3d("+-this.settings.position*this.proc+"%, 0, 0)"}},{key:"touchMove",value:function(t){if(this.touches.endDetect&&"carousel"===this.userOptions.typeChange){var s=void 0===t.touches?t.clientX:t.touches[0].clientX,i=100/(this.widthContainer/(this.touches.start-s));5<Math.abs(i)&&this.scrollDisable(),this.touches.current=s,this.settings.wrapper.style.transform="translate3d("+(-this.settings.position*this.proc-i)+"%, 0, 0)"}}},{key:"nextSlide",value:function(){var t=this;this.typeOut(this.settings.position),t.userOptions.infinity?t.settings.position=t.settings.position>=t.settings.maxPosition?0:++t.settings.position:t.settings.position=t.settings.position>=t.settings.maxPosition?t.settings.position:++t.settings.position;var s=function(){t.settings.wrapper.style.transform="translate3d("+-t.settings.position*t.proc+"%, 0, 0)",t.typeIn(t.settings.position)};"carousel"===this.userOptions.typeChange?s():setTimeout(s,1e3*this.userOptions.duration),this.changesDot(),this.userOptions.beforeChange(this.settings.position)}},{key:"prevSlide",value:function(){var t=this;this.typeOut(this.settings.position),t.userOptions.infinity?t.settings.position=t.settings.position<=0?t.settings.maxPosition:--t.settings.position:t.settings.position=t.settings.position<=0?t.settings.position:--t.settings.position;var s=function(){t.settings.wrapper.style.transform="translate3d("+-t.settings.position*t.proc+"%, 0, 0)",t.typeIn(t.settings.position)};"carousel"===this.userOptions.typeChange?s():setTimeout(s,1e3*this.userOptions.duration),this.changesDot(),this.userOptions.beforeChange(this.settings.position)}},{key:"goToSlide",value:function(t){this.settings.position=t,this.settings.wrapper.style.transform="translate3d("+-this.settings.position*this.proc+"%, 0, 0)",this.changesDot(),this.userOptions.beforeChange(t)}},{key:"changesDot",value:function(){var i=this;this.userOptions.dots&&[].forEach.call(this.settings.dots.children,function(t,s){i.settings.dots.children[s].classList.remove("active"),s===i.settings.position&&i.settings.dots.children[s].classList.add("active")})}},{key:"typeIn",value:function(t){"carousel"===this.userOptions.typeChange||(this.settings.wrapper.children[t].classList.remove("fade"===this.userOptions.typeChange?"fadeOut":"zoomOut"),this.settings.wrapper.children[t].classList.add("fade"===this.userOptions.typeChange?"fadeIn":"zoomIn"))}},{key:"typeOut",value:function(t){"carousel"===this.userOptions.typeChange||(this.settings.wrapper.children[t].classList.remove("fade"===this.userOptions.typeChange?"fadeIn":"zoomIn"),this.settings.wrapper.children[t].classList.add("fade"===this.userOptions.typeChange?"fadeOut":"zoomOut"))}},{key:"scrollDisable",value:function(){document.ontouchmove=function(t){return t.preventDefault()}}},{key:"scrollEnabled",value:function(){document.ontouchmove=function(){return!0}}}]),e}();exports.default=AccmiSlider;